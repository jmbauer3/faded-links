<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Faded Links</title>
  <link rel="stylesheet" href="styles.css"> <!-- Updated to match your file -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <link rel="icon" href="assets/favicon/favicon.ico" type="image"> <!-- Favicon added here -->
</head>
<body>

  <!-- Video Background -->
  <div id="video-background">
    <div id="player">
      <!-- YouTube iframe will load here -->
    </div>
  </div>

  <!-- Move title and music player outside the feed -->
  <div id="header">
    <h1 id="title">
      <a href="end.html">Faded Links</a> <!-- Link to end.html -->
    </h1>
    <div class="music-player">
      <audio id="background-music" controls autoplay volume="0.4">
        <source src="assets/drunk-in-carthage.mp3" type="audio/mpeg">
        Your browser does not support the audio element.
      </audio>
    </div>
  </div>

  <div id="feed">
    <!-- Comments will be dynamically loaded here -->
  </div>

  <script src="https://www.youtube.com/iframe_api"></script> <!-- YouTube API script -->

<script>
  const music = document.getElementById('background-music');

  // Redirect when music ends
  music.addEventListener('ended', () => {
    window.location.href = 'end.html';
  });

  // Optional: pause audio on title click
  document.querySelector('#title a').addEventListener('click', (event) => { 
    music.pause(); 
  });

  // Dynamically load comments
  const feed = document.getElementById('feed');
  const commentsData = [ /* Insert comments array here */ ];

  // Function to create comment element
  function createCommentElement(comment) {
    const commentElement = document.createElement('div');
    commentElement.classList.add('comment');
    commentElement.innerHTML = `
      <p>${comment}</p>
      <div class="actions">
        <span class="like-btn">
          <i class="fas fa-thumbs-up"></i> <span class="like-count">0</span>
        </span>
        <span class="comment-btn">
          <i class="fas fa-comment"></i> Comment
        </span>
      </div>
      <div class="reply-box" style="display:none;">
        <textarea placeholder="Write a reply..."></textarea>
        <button class="reply-submit">Submit</button>
      </div>
      <div class="user-reply"></div>
    `;
    return commentElement;
  }

  // Load and append comments to the feed
  commentsData.forEach(comment => {
    const commentElement = createCommentElement(comment);
    feed.appendChild(commentElement);
  });

  // Event delegation for likes and comment interactions
  feed.addEventListener('click', (event) => {
    if (event.target.closest('.like-btn')) {
      toggleLike(event.target.closest('.like-btn'));
    }
    if (event.target.closest('.comment-btn')) {
      toggleCommentBox(event.target.closest('.comment-btn'));
    }
    if (event.target.classList.contains('reply-submit')) {
      submitReply(event.target);
    }
  });

  // Toggle like functionality
  function toggleLike(likeBtn) {
    let likeCounter = likeBtn.querySelector('.like-count');
    let isLiked = likeBtn.classList.toggle('liked');

    if (isLiked) {
      likeCounter.innerText = parseInt(likeCounter.innerText) + 1;
    } else {
      likeCounter.innerText = parseInt(likeCounter.innerText) - 1;
    }
  }

  // Toggle comment box visibility
  function toggleCommentBox(commentBtn) {
    const commentBox = commentBtn.closest('.comment').querySelector('.reply-box');
    commentBox.style.display = (commentBox.style.display === 'none' || !commentBox.style.display) ? 'block' : 'none';
  }

  // Submit reply functionality
  function submitReply(button) {
    const replyBox = button.previousElementSibling;
    const userReply = replyBox.value.trim();
    
    if (userReply !== "") {
      const replyContainer = button.closest('.comment').querySelector('.user-reply');
      replyContainer.innerHTML += `<p>${userReply}</p>`;
      replyBox.value = ""; // Clear the input field after submission
    }
  }
</script>

  <script src="script.js"></script> <!-- Your JS code -->
</body>
</html>
